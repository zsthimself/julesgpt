<!-- Generated by SpecStory -->

# ç½‘ç«™å·¥å…·åŠŸèƒ½å®ç°è®¨è®º (2025-05-21 15:09:56)

_**User**_

è¯·æŸ¥çœ‹å½“å‰ç½‘ç«™é¡¹ç›®ä»£ç åº“ï¼Œæˆ‘è¦å®ç°ç½‘ç«™å·¥å…·çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ai detectorï¼Œå¯ä¸å¯ä»¥ä½¿ç”¨open aiçš„apiï¼Œç„¶åå†åå°è®¾ç½®ä¸ªpromptä½¿å¾—è¿™ä¸ªç½‘ç«™è°ƒç”¨apiåï¼Œaiå®ç°ç›‘æµ‹ï¼Œè¯­æ³•æ£€æŸ¥ï¼ŒæŸ¥é‡ç­‰ç­‰åŠŸèƒ½

---

_**Assistant**_



---

è®©æˆ‘å…ˆäº†è§£ä¸€ä¸‹é¡¹ç›®ç»“æ„å’Œå·²æœ‰çš„å·¥å…·æ•°æ®ï¼Œè¿™æ ·æˆ‘å¯ä»¥æ›´å¥½åœ°è§£ç­”å¦‚ä½•é›†æˆOpenAI APIæ¥å®ç°AIæ£€æµ‹ç­‰åŠŸèƒ½ã€‚

---

<details>
            <summary>Listed directory lib â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `tools-data.ts` |
| ğŸ“„ `utils.ts` |

</details>

---

Read file: lib/tools-data.ts

---

<details>
            <summary>Listed directory pages/api â€¢ **0** results</summary>
        
No results found
</details>

---

Could not resolve URI: Error: æ— æ³•è§£æä¸å­˜åœ¨çš„æ–‡ä»¶ 'e:\project\gpt\app\api'

---

<details>
            <summary>Listed directory app â€¢ **7** results</summary>
        
| Name |
|-------|
| ğŸ“„ `layout.tsx` |
| ğŸ“„ `page.tsx` |
| ğŸ“ `pricing` |
| ğŸ“„ `not-found.tsx` |
| ğŸ“ `tools` |
| ğŸ“„ `globals.css` |
| ğŸ“„ `favicon.ico` |

</details>

---

<details>
            <summary>Listed directory app/tools â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“ `[id]` |

</details>

---

Read file: app/tools/[id]/page.tsx

---

Read file: components/tools/ToolPage.tsx

---

<details>
            <summary>Searched codebase "api route" â€¢ **4** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

æ˜¯çš„ï¼Œæ‚¨å®Œå…¨å¯ä»¥ä½¿ç”¨OpenAIçš„APIæ¥å®ç°AIæ£€æµ‹å™¨ã€è¯­æ³•æ£€æŸ¥ã€æŸ¥é‡ç­‰åŠŸèƒ½ã€‚æ ¹æ®æˆ‘çœ‹åˆ°çš„é¡¹ç›®ä»£ç ï¼Œæ‚¨å·²ç»æœ‰ä¸€ä¸ªå·¥å…·æ•°æ®ç»“æ„å’Œç•Œé¢å‡†å¤‡å¥½äº†ï¼Œåªéœ€è¦å®ç°åç«¯APIå’Œè¿æ¥OpenAIã€‚ä»¥ä¸‹æ˜¯å…·ä½“å®ç°æ–¹æ¡ˆï¼š

## å®ç°æ–¹æ¡ˆ

1. åˆ›å»ºAPIè·¯ç”±æ–‡ä»¶
2. é…ç½®OpenAI API
3. å®ç°å„å·¥å…·åŠŸèƒ½

### 1. åˆ›å»ºAPIè·¯ç”±æ–‡ä»¶

é¦–å…ˆï¼Œåœ¨Next.jsé¡¹ç›®ä¸­åˆ›å»ºAPIè·¯ç”±:

```
app/api/detect/route.ts
app/api/plagiarism/route.ts  
app/api/humanize/route.ts
app/api/batch-analyze/route.ts
```

### 2. OpenAI APIé…ç½®

åˆ›å»ºé…ç½®æ–‡ä»¶:

```typescript:lib/openai.ts
import { Configuration, OpenAIApi } from "openai";

const configuration = new Configuration({
  apiKey: process.env.OPENAI_API_KEY,
});

const openai = new OpenAIApi(configuration);

export default openai;
```

åœ¨`.env.local`æ–‡ä»¶ä¸­æ·»åŠ æ‚¨çš„APIå¯†é’¥:

```
OPENAI_API_KEY=æ‚¨çš„å¯†é’¥
```

### 3. AIæ£€æµ‹å™¨å®ç°ç¤ºä¾‹

```typescript:app/api/detect/route.ts
import { NextRequest, NextResponse } from "next/server";
import openai from "@/lib/openai";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { inputText } = body;
    
    if (!inputText || inputText.trim() === "") {
      return NextResponse.json(
        { error: "è¯·æä¾›æ–‡æœ¬å†…å®¹" },
        { status: 400 }
      );
    }

    // è°ƒç”¨OpenAIçš„APIè¿›è¡ŒAIæ£€æµ‹
    const prompt = `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIå†…å®¹æ£€æµ‹å™¨ã€‚è¯·åˆ†æä»¥ä¸‹æ–‡æœ¬ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦ç”±AIç”Ÿæˆã€‚
    è¯·åˆ†ææ¯ä¸ªå¥å­ï¼Œå¹¶ç»™å‡ºä»¥ä¸‹æ ¼å¼çš„ç»“æœ:
    1. æ•´ä½“AIç”Ÿæˆå¯èƒ½æ€§ç™¾åˆ†æ¯”
    2. æ¯å¥è¯çš„AIç”Ÿæˆå¯èƒ½æ€§è¯„åˆ†(0-100)
    3. å¯¹æ–‡æœ¬çš„æ€»ä½“è¯„ä»·

    æ–‡æœ¬å†…å®¹:
    "${inputText}"
    `;

    const response = await openai.createChatCompletion({
      model: "gpt-4",  // æˆ–å…¶ä»–åˆé€‚çš„æ¨¡å‹
      messages: [
        { role: "system", content: "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIå†…å®¹æ£€æµ‹å™¨" },
        { role: "user", content: prompt }
      ],
      temperature: 0.2,
    });

    // è§£æOpenAIè¿”å›çš„ç»“æœ
    const completion = response.data.choices[0].message.content;
    
    // å¤„ç†è¿”å›ç»“æœï¼Œå°†å…¶æ ¼å¼åŒ–ä¸ºå‰ç«¯éœ€è¦çš„æ ¼å¼
    const sentences = inputText.split(/(?<=\.|\?|\!)\s+/);
    
    // è¿™é‡Œéœ€è¦ä¸€ä¸ªå‡½æ•°æ¥è§£æOpenAIè¿”å›çš„æ–‡æœ¬å¹¶è½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®
    // ç®€å•ç¤ºä¾‹ï¼š
    const sentenceAnalysis = sentences.map(sentence => {
      // è§£æé€»è¾‘ï¼Œä»completionä¸­æå–æ¯å¥è¯çš„è¯„åˆ†
      const score = Math.floor(Math.random() * 100); // ç¤ºä¾‹éšæœºè¯„åˆ†ï¼Œå®é™…åº”ä»completionè§£æ
      return {
        text: sentence,
        score,
        isAIGenerated: score > 65
      };
    });
    
    const overallScore = Math.round(
      sentenceAnalysis.filter(s => s.isAIGenerated).length / sentences.length * 100
    );
    
    return NextResponse.json({
      status: "success",
      analysisResult: {
        overallScore,
        sentenceAnalysis,
        summary: completion, // æˆ–æå–å…³é”®éƒ¨åˆ†
      }
    });
    
  } catch (error) {
    console.error("AIæ£€æµ‹å™¨APIé”™è¯¯:", error);
    return NextResponse.json(
      { error: "å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯" },
      { status: 500 }
    );
  }
}
```

### 4. è¯­æ³•æ£€æŸ¥å®ç°

```typescript:app/api/grammar/route.ts
import { NextRequest, NextResponse } from "next/server";
import openai from "@/lib/openai";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { inputText } = body;
    
    if (!inputText) {
      return NextResponse.json(
        { error: "è¯·æä¾›æ–‡æœ¬å†…å®¹" },
        { status: 400 }
      );
    }

    const prompt = `è¯·æ£€æŸ¥ä»¥ä¸‹æ–‡æœ¬çš„è¯­æ³•é”™è¯¯ï¼Œå¹¶æä¾›ä¿®æ­£ã€‚
    è¯·ä»¥ä»¥ä¸‹æ ¼å¼è¿”å›:
    1. å‘ç°çš„è¯­æ³•é—®é¢˜åˆ—è¡¨
    2. ä¿®æ­£åçš„å®Œæ•´æ–‡æœ¬
    
    åŸæ–‡:
    "${inputText}"
    `;

    const response = await openai.createChatCompletion({
      model: "gpt-4",
      messages: [
        { role: "system", content: "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è¯­æ³•æ£€æŸ¥å·¥å…·" },
        { role: "user", content: prompt }
      ],
      temperature: 0.2,
    });

    const completion = response.data.choices[0].message.content;
    
    return NextResponse.json({
      status: "success",
      result: completion
    });
    
  } catch (error) {
    console.error("è¯­æ³•æ£€æŸ¥APIé”™è¯¯:", error);
    return NextResponse.json(
      { error: "å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯" },
      { status: 500 }
    );
  }
}
```

### 5. æŸ¥é‡åŠŸèƒ½å®ç°

```typescript:app/api/plagiarism/route.ts
import { NextRequest, NextResponse } from "next/server";
import openai from "@/lib/openai";

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { inputText } = body;
    
    if (!inputText) {
      return NextResponse.json(
        { error: "è¯·æä¾›æ–‡æœ¬å†…å®¹" },
        { status: 400 }
      );
    }

    // è¿™é‡Œå¯ä»¥æ•´åˆå…¶ä»–æŸ¥é‡APIï¼Œæˆ–ä½¿ç”¨OpenAIè¿›è¡Œæ¨¡æ‹Ÿ
    const prompt = `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ–‡æœ¬æŸ¥é‡å·¥å…·ã€‚
    è¯·åˆ†æä»¥ä¸‹æ–‡æœ¬ï¼Œåˆ¤æ–­å…¶æ˜¯å¦åŒ…å«æŠ„è¢­å†…å®¹ã€‚
    ç»™å‡ºä½ çš„åˆ¤æ–­å’Œç†ç”±:
    
    "${inputText}"
    `;

    const response = await openai.createChatCompletion({
      model: "gpt-4",
      messages: [
        { role: "system", content: "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŸ¥é‡å·¥å…·" },
        { role: "user", content: prompt }
      ],
      temperature: 0.3,
    });

    const completion = response.data.choices[0].message.content;
    
    return NextResponse.json({
      status: "success",
      result: completion
    });
    
  } catch (error) {
    console.error("æŸ¥é‡APIé”™è¯¯:", error);
    return NextResponse.json(
      { error: "å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯" },
      { status: 500 }
    );
  }
}
```

### 6. å‰ç«¯ä»£ç è°ƒæ•´

ä¿®æ”¹`ToolPage.tsx`ç»„ä»¶ä¸­çš„å¤„ç†å‡½æ•°ï¼Œè¿æ¥åˆ°çœŸå®API:

```typescript:12:75:components/tools/ToolPage.tsx
  const handleProcess = async () => {
    if (!inputText.trim()) {
      setError("è¯·è¾“å…¥æ–‡æœ¬æˆ–ä¸Šä¼ æ–‡ä»¶");
      return;
    }

    setIsLoading(true);
    setError(null);

    try {
      // çœŸå®APIè°ƒç”¨
      const response = await fetch(tool.apiEndpoint, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ inputText }),
      });
      
      if (!response.ok) {
        throw new Error('å¤„ç†è¯·æ±‚å¤±è´¥');
      }
      
      const data = await response.json();
      if (data.status === 'success') {
        setResult(data.result || data.analysisResult);
      } else {
        setError(data.error || 'å‘ç”Ÿé”™è¯¯');
      }
    } catch (err) {
      console.error("å¤„ç†é”™è¯¯:", err);
      setError("å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·é‡è¯•");
    } finally {
      setIsLoading(false);
    }
  };
```

## æ€»ç»“

1. æ‚¨å¯ä»¥ä½¿ç”¨OpenAI APIä¸ºç½‘ç«™å®ç°å„ç§AIå·¥å…·åŠŸèƒ½
2. é€šè¿‡è®¾è®¡ä¸åŒçš„promptï¼Œå¯ä»¥è®©åŒä¸€ä¸ªAPIå®ç°ä¸åŒçš„åŠŸèƒ½:
   - AIå†…å®¹æ£€æµ‹
   - è¯­æ³•æ£€æŸ¥
   - æŸ¥é‡
   - å†…å®¹ä¼˜åŒ–ç­‰

3. æ ¹æ®ä¸åŒéœ€æ±‚ï¼Œå¯ä»¥è°ƒæ•´æ¨¡å‹å‚æ•°(temperatureç­‰)ä»¥è·å¾—æœ€ä½³ç»“æœ

4. å¯¹äºå¤§æ–‡ä»¶æˆ–æ‰¹é‡å¤„ç†ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æµå¤„ç†æˆ–ä»»åŠ¡é˜Ÿåˆ—

å®ç°è¿™äº›åŠŸèƒ½åï¼Œæ‚¨çš„ç½‘ç«™å°†æ‹¥æœ‰å¼ºå¤§çš„AIå·¥å…·é›†ï¼Œå¹¶ä¸”æ‰€æœ‰åŠŸèƒ½éƒ½å¯ä»¥é€šè¿‡OpenAI APIæ¥å®ç°ï¼Œæ— éœ€å¤æ‚çš„è‡ªç ”æ¨¡å‹ã€‚

---

_**User**_

å¯¹è¿™ä¸ªç½‘ç«™åšseoä¼˜åŒ–ï¼Œæœ‰äººè¯´åˆ›å»ºç«™ç‚¹åœ°å›¾æ–‡ä»¶ï¼Œè¿™ä¸ªåœ¨é¡¹ç›®é‡Œæœ‰ä»€ä¹ˆç”¨ï¼Œå¦‚æœæœªæ¥ç½‘ç«™ä¸Šæ–°é¡µé¢å’ŒåŠŸèƒ½è¿˜è¦æ›´æ–°ç«™ç‚¹åœ°å›¾å—

---

_**Assistant**_



---

<details>
            <summary>Listed directory public â€¢ **6** results</summary>
        
| Name |
|-------|
| ğŸ“„ `favicon.svg` |
| ğŸ“„ `globe.svg` |
| ğŸ“„ `next.svg` |
| ğŸ“„ `file.svg` |
| ğŸ“„ `vercel.svg` |
| ğŸ“„ `window.svg` |

</details>

---

<details>
            <summary>Searched codebase "sitemap" â€¢ **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---

<no message>

---

<details>
            <summary>Listed directory app â€¢ **7** results</summary>
        
| Name |
|-------|
| ğŸ“„ `page.tsx` |
| ğŸ“„ `layout.tsx` |
| ğŸ“ `pricing` |
| ğŸ“„ `not-found.tsx` |
| ğŸ“ `tools` |
| ğŸ“„ `globals.css` |
| ğŸ“„ `favicon.ico` |

</details>

---

<no message>

---

Read file: package.json

---



---

